<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Participa no Quiz</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    h2 { margin-top: 40px; }
    .resultados { margin-top: 10px; font-style: italic; color: #555; }
    .resposta-correta { margin-top: 10px; font-weight: bold; color: green; }
  </style>
</head>
<body>

  <h2>1. Qual é a percentagem de mulheres à frente de bancas no mercado?</h2>
  <input type="range" min="0" max="100" value="50" id="slider1" oninput="updateLabel('label1', this.value)">
  <span id="label1">50%</span>
  <button onclick="enviarResposta('mercado', document.getElementById('slider1').value)">Submeter</button>
  <div id="resultado1" class="resultados"></div>
  <div id="correto1" class="resposta-correta" style="display:none;">As mulheres são mais de 65% do total de comerciantes</div>

  <h2>2. Qual é a percentagem de mulheres à frente de pelouros no executivo municipal?</h2>
  <input type="range" min="0" max="100" value="50" id="slider2" oninput="updateLabel('label2', this.value)">
  <span id="label2">50%</span>
  <button onclick="enviarResposta('executivo', document.getElementById('slider2').value)">Submeter</button>
  <div id="resultado2" class="resultados"></div>
  <div id="correto2" class="resposta-correta" style="display:none;">As mulheres são menos de 30% do total</div>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwZ15K2Tz6i2lqdIN8VdcWoJodtUCxcHTYA7AFzZErP0IjQRQxlreYtNJ21GGO8dIPAnw/exec';

    function updateLabel(id, val) {
      document.getElementById(id).innerText = val + '%';
    }

    function enviarResposta(perguntaId, valor) {
      fetch(scriptURL, {
        method: 'POST',
        body: JSON.stringify({ perguntaId: perguntaId, resposta: valor })
      })
      .then(res => res.json())
      .then(data => {
        const media = data.media.toFixed(1);
        const total = data.total;

        const resultadoId = perguntaId === 'mercado' ? 'resultado1' : 'resultado2';
        const corretoId = perguntaId === 'mercado' ? 'correto1' : 'correto2';

        document.getElementById(resultadoId).innerText =
          `Média das respostas: ${media}%. Total de respostas: ${total}`;
        
        document.getElementById(corretoId).style.display = 'block';
      })
      .catch(err => alert('Erro ao enviar: ' + err));
    }
  </script>

</body>
</html>
